/*! For license information please see 946.589f0fff1690755fbcd1.js.LICENSE.txt */
(self.webpackChunkcontainer=self.webpackChunkcontainer||[]).push([[946],{3946:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AuthClient:()=>a,StorageKey:()=>o,TokenStorageService:()=>s});var o,n=r(2385),i=r.n(n);!function(e){e.AU_ACCESS_TOKEN="au-access_token",e.AU_REALM="au-realm"}(o||(o={}));class s extends class{constructor(e=(()=>window.sessionStorage)){this.storage=e()}get(e){return this.storage.getItem(e)}set(e,t){this.storage.setItem(e,t)}clearItem(e){this.storage.removeItem(e)}clearItems(e){e.forEach((e=>this.clearItem(e)))}}{constructor(){super(),this.setRealm=e=>{if(e)try{this.set(o.AU_REALM,JSON.stringify(e))}catch(e){s.onAccessError(e)}},this.getRealm=()=>{let e="";try{e=JSON.parse(this.get(o.AU_REALM))}catch(e){s.onAccessError(e)}return e}}static getInstance({onAccessError:e}){return this.instance||(this.instance=new s,s.onAccessError=e||console.error),this.instance}getAccessToken(){let e="";try{e=JSON.parse(this.get(o.AU_ACCESS_TOKEN))}catch(e){s.onAccessError(e)}return e}setAccessToken(e){if(e)try{this.set(o.AU_ACCESS_TOKEN,JSON.stringify(e))}catch(e){s.onAccessError(e)}}clear(){this.clearItems([o.AU_REALM,o.AU_ACCESS_TOKEN])}}class a{constructor(e){this.init=e=>{this.kc.init({onLoad:"login-required",pkceMethod:"S256"}).then((t=>{t?(this.tokenStorageService.setAccessToken(this.kc.token),e()):this.kc.login()}))},this.doLogin=e=>this.kc.login(e),this.doLogout=e=>this.kc.logout(e),this.getToken=()=>this.kc.token,this.isLoggedIn=()=>!!this.kc.idToken||!!this.kc.token,this.updateToken=e=>{const t=(null==e?void 0:e.minValidity)||5;this.kc.updateToken(t).then((t=>{t&&(this.tokenStorageService.setAccessToken(this.kc.token),"function"==typeof(null==e?void 0:e.successCallback)&&e.successCallback())})).catch(this.doLogin)},this.getTokenParsed=()=>this.kc.tokenParsed,this.getUsername=()=>{let e=null;if(this.kc&&this.kc.authenticated&&this.kc.tokenParsed){const t=this.kc.tokenParsed;e=null==t?void 0:t.preferred_username}return e},this.hasRealmRole=e=>e.some((e=>this.kc.hasRealmRole(e)));const t=Object.assign({},e),{onAccessError:r}=t;if(this.tokenStorageService=s.getInstance({onAccessError:r}),e.realm)this.tokenStorageService.setRealm(e.realm);else{if(!this.tokenStorageService.getRealm())return void console.error("Realm is required");t.realm=this.tokenStorageService.getRealm()}this.kc=new(i())(Object.assign({},t))}}},9742:(e,t)=>{"use strict";t.byteLength=function(e){var t=c(e),r=t[0],o=t[1];return 3*(r+o)/4-o},t.toByteArray=function(e){var t,r,i=c(e),s=i[0],a=i[1],u=new n(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),h=0,l=a>0?s-4:s;for(r=0;r<l;r+=4)t=o[e.charCodeAt(r)]<<18|o[e.charCodeAt(r+1)]<<12|o[e.charCodeAt(r+2)]<<6|o[e.charCodeAt(r+3)],u[h++]=t>>16&255,u[h++]=t>>8&255,u[h++]=255&t;return 2===a&&(t=o[e.charCodeAt(r)]<<2|o[e.charCodeAt(r+1)]>>4,u[h++]=255&t),1===a&&(t=o[e.charCodeAt(r)]<<10|o[e.charCodeAt(r+1)]<<4|o[e.charCodeAt(r+2)]>>2,u[h++]=t>>8&255,u[h++]=255&t),u},t.fromByteArray=function(e){for(var t,o=e.length,n=o%3,i=[],s=16383,a=0,c=o-n;a<c;a+=s)i.push(u(e,a,a+s>c?c:a+s));return 1===n?(t=e[o-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===n&&(t=(e[o-2]<<8)+e[o-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")};for(var r=[],o=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=i.length;s<a;++s)r[s]=i[s],o[i.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e,t,o){for(var n,i,s=[],a=t;a<o;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(i=n)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},2023:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_RESULT__;(function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=__webpack_require__.g:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&module.exports,AMD=__webpack_require__.amdO,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];!root.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e,t){return function(r){return new Sha256(t,!0).update(r)[e]()}},createMethod=function(e){var t=createOutputMethod("hex",e);NODE_JS&&(t=nodeWrap(t,e)),t.create=function(){return new Sha256(e)},t.update=function(e){return t.create().update(e)};for(var r=0;r<OUTPUT_TYPES.length;++r){var o=OUTPUT_TYPES[r];t[o]=createOutputMethod(o,e)}return t},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(e){if("string"==typeof e)return crypto.createHash(algorithm).update(e,"utf8").digest("hex");if(null==e)throw new Error(ERROR);return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod},createHmacOutputMethod=function(e,t){return function(r,o){return new HmacSha256(r,t,!0).update(o)[e]()}},createHmacMethod=function(e){var t=createHmacOutputMethod("hex",e);t.create=function(t){return new HmacSha256(t,e)},t.update=function(e,r){return t.create(e).update(r)};for(var r=0;r<OUTPUT_TYPES.length;++r){var o=OUTPUT_TYPES[r];t[o]=createHmacOutputMethod(o,e)}return t};function Sha256(e,t){t?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function HmacSha256(e,t,r){var o,n=typeof e;if("string"===n){var i,s=[],a=e.length,c=0;for(o=0;o<a;++o)(i=e.charCodeAt(o))<128?s[c++]=i:i<2048?(s[c++]=192|i>>6,s[c++]=128|63&i):i<55296||i>=57344?(s[c++]=224|i>>12,s[c++]=128|i>>6&63,s[c++]=128|63&i):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++o)),s[c++]=240|i>>18,s[c++]=128|i>>12&63,s[c++]=128|i>>6&63,s[c++]=128|63&i);e=s}else{if("object"!==n)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR)}e.length>64&&(e=new Sha256(t,!0).update(e).array());var u=[],h=[];for(o=0;o<64;++o){var l=e[o]||0;u[o]=92^l,h[o]=54^l}Sha256.call(this,t,r),this.update(h),this.oKeyPad=u,this.inner=!0,this.sharedMemory=r}Sha256.prototype.update=function(e){if(!this.finalized){var t,r=typeof e;if("string"!==r){if("object"!==r)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR);t=!0}for(var o,n,i=0,s=e.length,a=this.blocks;i<s;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),t)for(n=this.start;i<s&&n<64;++i)a[n>>2]|=e[i]<<SHIFT[3&n++];else for(n=this.start;i<s&&n<64;++i)(o=e.charCodeAt(i))<128?a[n>>2]|=o<<SHIFT[3&n++]:o<2048?(a[n>>2]|=(192|o>>6)<<SHIFT[3&n++],a[n>>2]|=(128|63&o)<<SHIFT[3&n++]):o<55296||o>=57344?(a[n>>2]|=(224|o>>12)<<SHIFT[3&n++],a[n>>2]|=(128|o>>6&63)<<SHIFT[3&n++],a[n>>2]|=(128|63&o)<<SHIFT[3&n++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++i)),a[n>>2]|=(240|o>>18)<<SHIFT[3&n++],a[n>>2]|=(128|o>>12&63)<<SHIFT[3&n++],a[n>>2]|=(128|o>>6&63)<<SHIFT[3&n++],a[n>>2]|=(128|63&o)<<SHIFT[3&n++]);this.lastByteIndex=n,this.bytes+=n-this.start,n>=64?(this.block=a[16],this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var e,t,r,o,n,i,s,a,c,u=this.h0,h=this.h1,l=this.h2,d=this.h3,f=this.h4,p=this.h5,k=this.h6,m=this.h7,g=this.blocks;for(e=16;e<64;++e)t=((n=g[e-15])>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,r=((n=g[e-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,g[e]=g[e-16]+t+g[e-7]+r<<0;for(c=h&l,e=0;e<64;e+=4)this.first?(this.is224?(i=300032,m=(n=g[0]-1413257819)-150054599<<0,d=n+24177077<<0):(i=704751109,m=(n=g[0]-210244248)-1521486534<<0,d=n+143694565<<0),this.first=!1):(t=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),o=(i=u&h)^u&l^c,m=d+(n=m+(r=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&p^~f&k)+K[e]+g[e])<<0,d=n+(t+o)<<0),t=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),o=(s=d&u)^d&h^i,k=l+(n=k+(r=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&f^~m&p)+K[e+1]+g[e+1])<<0,t=((l=n+(t+o)<<0)>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),o=(a=l&d)^l&u^s,p=h+(n=p+(r=(k>>>6|k<<26)^(k>>>11|k<<21)^(k>>>25|k<<7))+(k&m^~k&f)+K[e+2]+g[e+2])<<0,t=((h=n+(t+o)<<0)>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),o=(c=h&l)^h&d^a,f=u+(n=f+(r=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&k^~p&m)+K[e+3]+g[e+3])<<0,u=n+(t+o)<<0;this.h0=this.h0+u<<0,this.h1=this.h1+h<<0,this.h2=this.h2+l<<0,this.h3=this.h3+d<<0,this.h4=this.h4+f<<0,this.h5=this.h5+p<<0,this.h6=this.h6+k<<0,this.h7=this.h7+m<<0},Sha256.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,o=this.h3,n=this.h4,i=this.h5,s=this.h6,a=this.h7,c=HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[15&s];return this.is224||(c+=HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]),c},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,o=this.h3,n=this.h4,i=this.h5,s=this.h6,a=this.h7,c=[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24&255,r>>16&255,r>>8&255,255&r,o>>24&255,o>>16&255,o>>8&255,255&o,n>>24&255,n>>16&255,n>>8&255,255&n,i>>24&255,i>>16&255,i>>8&255,255&i,s>>24&255,s>>16&255,s>>8&255,255&s];return this.is224||c.push(a>>24&255,a>>16&255,a>>8&255,255&a),c},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()},2385:(e,t,r)=>{window,e.exports=function(e,t){if("undefined"==typeof Promise)throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");var r=!1;function o(){r||(r=!0,console.warn("[KEYCLOAK] Usage of legacy style promise methods such as `.error()` and `.success()` has been deprecated and support will be removed in future versions. Use standard style promise methods such as `.then() and `.catch()` instead."))}function n(e){return e.__proto__=i.prototype,e}function i(e){return n(new Promise(e))}return i.prototype=Object.create(Promise.prototype),i.prototype.constructor=i,i.prototype.success=function(e){return o(),n(this.then((function(t){e(t)})))},i.prototype.error=function(e){return o(),n(this.catch((function(t){e(t)})))},function r(o){if(!(this instanceof r))return new r(o);for(var n,s,a=this,c=[],u={enable:!0,callbackList:[],interval:5},h=document.getElementsByTagName("script"),l=0;l<h.length;l++)-1===h[l].src.indexOf("keycloak.js")&&-1===h[l].src.indexOf("keycloak.min.js")||-1===h[l].src.indexOf("version=")||(a.iframeVersion=h[l].src.substring(h[l].src.indexOf("version=")+8).split("&")[0]);var d=!0,f=T(console.info),p=T(console.warn);function k(e,t){for(var r=function(e){var t=null,r=window.crypto||window.msCrypto;if(r&&r.getRandomValues&&window.Uint8Array)return t=new Uint8Array(e),r.getRandomValues(t),t;t=new Array(e);for(var o=0;o<t.length;o++)t[o]=Math.floor(256*Math.random());return t}(e),o=new Array(e),n=0;n<e;n++)o[n]=t.charCodeAt(r[n]%t.length);return String.fromCharCode.apply(null,o)}function m(){return void 0!==a.authServerUrl?"/"==a.authServerUrl.charAt(a.authServerUrl.length-1)?a.authServerUrl+"realms/"+encodeURIComponent(a.realm):a.authServerUrl+"/realms/"+encodeURIComponent(a.realm):void 0}function g(e,t){var r=e.code,o=e.error,n=e.prompt,i=(new Date).getTime();if(o)if("none"!=n){var s={error:o,error_description:e.error_description};a.onAuthError&&a.onAuthError(s),t&&t.setError(s)}else t&&t.setSuccess();else if("standard"!=a.flow&&(e.access_token||e.id_token)&&l(e.access_token,null,e.id_token,!0),"implicit"!=a.flow&&r){var c="code="+r+"&grant_type=authorization_code",u=a.endpoints.token(),h=new XMLHttpRequest;h.open("POST",u,!0),h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c+="&client_id="+encodeURIComponent(a.clientId),c+="&redirect_uri="+e.redirectUri,e.pkceCodeVerifier&&(c+="&code_verifier="+e.pkceCodeVerifier),h.withCredentials=!0,h.onreadystatechange=function(){if(4==h.readyState)if(200==h.status){var e=JSON.parse(h.responseText);l(e.access_token,e.refresh_token,e.id_token,"standard"===a.flow),H()}else a.onAuthError&&a.onAuthError(),t&&t.setError()},h.send(c)}function l(r,o,n,s){_(r,o,n,i=(i+(new Date).getTime())/2),d&&(a.tokenParsed&&a.tokenParsed.nonce!=e.storedNonce||a.refreshTokenParsed&&a.refreshTokenParsed.nonce!=e.storedNonce||a.idTokenParsed&&a.idTokenParsed.nonce!=e.storedNonce)?(f("[KEYCLOAK] Invalid nonce, clearing token"),a.clearToken(),t&&t.setError()):s&&(a.onAuthSuccess&&a.onAuthSuccess(),t&&t.setSuccess())}}function S(e){return 0==e.status&&e.responseText&&e.responseURL.startsWith("file:")}function _(e,t,r,o){if(a.tokenTimeoutHandle&&(clearTimeout(a.tokenTimeoutHandle),a.tokenTimeoutHandle=null),t?(a.refreshToken=t,a.refreshTokenParsed=v(t)):(delete a.refreshToken,delete a.refreshTokenParsed),r?(a.idToken=r,a.idTokenParsed=v(r)):(delete a.idToken,delete a.idTokenParsed),e){if(a.token=e,a.tokenParsed=v(e),a.sessionId=a.tokenParsed.session_state,a.authenticated=!0,a.subject=a.tokenParsed.sub,a.realmAccess=a.tokenParsed.realm_access,a.resourceAccess=a.tokenParsed.resource_access,o&&(a.timeSkew=Math.floor(o/1e3)-a.tokenParsed.iat),null!=a.timeSkew&&(f("[KEYCLOAK] Estimated time difference between browser and server is "+a.timeSkew+" seconds"),a.onTokenExpired)){var n=1e3*(a.tokenParsed.exp-(new Date).getTime()/1e3+a.timeSkew);f("[KEYCLOAK] Token expires in "+Math.round(n/1e3)+" s"),n<=0?a.onTokenExpired():a.tokenTimeoutHandle=setTimeout(a.onTokenExpired,n)}}else delete a.token,delete a.tokenParsed,delete a.subject,delete a.realmAccess,delete a.resourceAccess,a.authenticated=!1}function v(e){switch((e=(e=(e=e.split(".")[1]).replace("/-/g","+")).replace("/_/g","/")).length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Invalid token"}return e=(e=(e+"===").slice(0,e.length+e.length%4)).replace(/-/g,"+").replace(/_/g,"/"),e=decodeURIComponent(escape(atob(e))),JSON.parse(e)}function A(){var e="0123456789abcdef",t=k(36,e).split("");return t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")}function w(e){var t=function(e){var t;switch(a.flow){case"standard":t=["code","state","session_state"];break;case"implicit":t=["access_token","token_type","id_token","state","session_state","expires_in"];break;case"hybrid":t=["access_token","id_token","code","state","session_state"]}t.push("error"),t.push("error_description"),t.push("error_uri");var r,o,n=e.indexOf("?"),i=e.indexOf("#");if("query"===a.responseMode&&-1!==n?(r=e.substring(0,n),""!==(o=E(e.substring(n+1,-1!==i?i:e.length),t)).paramsString&&(r+="?"+o.paramsString),-1!==i&&(r+=e.substring(i))):"fragment"===a.responseMode&&-1!==i&&(r=e.substring(0,i),""!==(o=E(e.substring(i+1),t)).paramsString&&(r+="#"+o.paramsString)),o&&o.oauthParams)if("standard"===a.flow||"hybrid"===a.flow){if((o.oauthParams.code||o.oauthParams.error)&&o.oauthParams.state)return o.oauthParams.newUrl=r,o.oauthParams}else if("implicit"===a.flow&&(o.oauthParams.access_token||o.oauthParams.error)&&o.oauthParams.state)return o.oauthParams.newUrl=r,o.oauthParams}(e);if(t){var r=s.get(t.state);return r&&(t.valid=!0,t.redirectUri=r.redirectUri,t.storedNonce=r.nonce,t.prompt=r.prompt,t.pkceCodeVerifier=r.pkceCodeVerifier),t}}function E(e,t){for(var r=e.split("&"),o={paramsString:"",oauthParams:{}},n=0;n<r.length;n++){var i=r[n].indexOf("="),s=r[n].slice(0,i);-1!==t.indexOf(s)?o.oauthParams[s]=r[n].slice(i+1):(""!==o.paramsString&&(o.paramsString+="&"),o.paramsString+=r[n])}return o}function R(){var e={setSuccess:function(t){e.resolve(t)},setError:function(t){e.reject(t)}};return e.promise=new i((function(t,r){e.resolve=t,e.reject=r})),e}function y(){var e=R();if(!u.enable)return e.setSuccess(),e.promise;if(u.iframe)return e.setSuccess(),e.promise;var t=document.createElement("iframe");u.iframe=t,t.onload=function(){var t=a.endpoints.authorize();"/"===t.charAt(0)?u.iframeOrigin=window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""):u.iframeOrigin=t.substring(0,t.indexOf("/",8)),e.setSuccess()};var r=a.endpoints.checkSessionIframe();t.setAttribute("src",r),t.setAttribute("title","keycloak-session-iframe"),t.style.display="none",document.body.appendChild(t);return window.addEventListener("message",(function(e){if(e.origin===u.iframeOrigin&&u.iframe.contentWindow===e.source&&("unchanged"==e.data||"changed"==e.data||"error"==e.data)){"unchanged"!=e.data&&a.clearToken();for(var t=u.callbackList.splice(0,u.callbackList.length),r=t.length-1;r>=0;--r){var o=t[r];"error"==e.data?o.setError():o.setSuccess("unchanged"==e.data)}}}),!1),e.promise}function H(){u.enable&&a.token&&setTimeout((function(){b().then((function(e){e&&H()}))}),1e3*u.interval)}function b(){var e=R();if(u.iframe&&u.iframeOrigin){var t=a.clientId+" "+(a.sessionId?a.sessionId:"");u.callbackList.push(e);var r=u.iframeOrigin;1==u.callbackList.length&&u.iframe.contentWindow.postMessage(t,r)}else e.setSuccess();return e.promise}function C(e){if(!e||"default"==e)return{login:function(e){return window.location.replace(a.createLoginUrl(e)),R().promise},logout:function(e){return window.location.replace(a.createLogoutUrl(e)),R().promise},register:function(e){return window.location.replace(a.createRegisterUrl(e)),R().promise},accountManagement:function(){var e=a.createAccountUrl();if(void 0===e)throw"Not supported by the OIDC server";return window.location.href=e,R().promise},redirectUri:function(e,t){return 1==arguments.length&&(t=!0),e&&e.redirectUri?e.redirectUri:a.redirectUri?a.redirectUri:location.href}};if("cordova"==e){u.enable=!1;var t=function(e,t,r){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(e,t,r):window.open(e,t,r)},r=function(e){var t=function(e){return e&&e.cordovaOptions?Object.keys(e.cordovaOptions).reduce((function(t,r){return t[r]=e.cordovaOptions[r],t}),{}):{}}(e);return t.location="no",e&&"none"==e.prompt&&(t.hidden="yes"),function(e){return Object.keys(e).reduce((function(t,r){return t.push(r+"="+e[r]),t}),[]).join(",")}(t)};return{login:function(e){var o=R(),n=r(e),i=a.createLoginUrl(e),s=t(i,"_blank",n),c=!1,u=!1,h=function(){u=!0,s.close()};return s.addEventListener("loadstart",(function(e){0==e.url.indexOf("http://localhost")&&(g(w(e.url),o),h(),c=!0)})),s.addEventListener("loaderror",(function(e){c||(0==e.url.indexOf("http://localhost")?(g(w(e.url),o),h(),c=!0):(o.setError(),h()))})),s.addEventListener("exit",(function(e){u||o.setError({reason:"closed_by_user"})})),o.promise},logout:function(e){var r,o=R(),n=a.createLogoutUrl(e),i=t(n,"_blank","location=no,hidden=yes");return i.addEventListener("loadstart",(function(e){0==e.url.indexOf("http://localhost")&&i.close()})),i.addEventListener("loaderror",(function(e){0==e.url.indexOf("http://localhost")||(r=!0),i.close()})),i.addEventListener("exit",(function(e){r?o.setError():(a.clearToken(),o.setSuccess())})),o.promise},register:function(e){var o=R(),n=a.createRegisterUrl(),i=r(e),s=t(n,"_blank",i);return s.addEventListener("loadstart",(function(e){0==e.url.indexOf("http://localhost")&&(s.close(),g(w(e.url),o))})),o.promise},accountManagement:function(){var e=a.createAccountUrl();if(void 0===e)throw"Not supported by the OIDC server";var r=t(e,"_blank","location=no");r.addEventListener("loadstart",(function(e){0==e.url.indexOf("http://localhost")&&r.close()}))},redirectUri:function(e){return"http://localhost"}}}if("cordova-native"==e)return u.enable=!1,{login:function(e){var t=R(),r=a.createLoginUrl(e);return universalLinks.subscribe("keycloak",(function(e){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),g(w(e.url),t)})),window.cordova.plugins.browsertab.openUrl(r),t.promise},logout:function(e){var t=R(),r=a.createLogoutUrl(e);return universalLinks.subscribe("keycloak",(function(e){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),a.clearToken(),t.setSuccess()})),window.cordova.plugins.browsertab.openUrl(r),t.promise},register:function(e){var t=R(),r=a.createRegisterUrl(e);return universalLinks.subscribe("keycloak",(function(e){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),g(w(e.url),t)})),window.cordova.plugins.browsertab.openUrl(r),t.promise},accountManagement:function(){var e=a.createAccountUrl();if(void 0===e)throw"Not supported by the OIDC server";window.cordova.plugins.browsertab.openUrl(e)},redirectUri:function(e){return e&&e.redirectUri?e.redirectUri:a.redirectUri?a.redirectUri:"http://localhost"}};throw"invalid adapter type: "+e}a.init=function(e){if(a.authenticated=!1,s=function(){try{return new U}catch(e){}return new O}(),n=e&&["default","cordova","cordova-native"].indexOf(e.adapter)>-1?C(e.adapter):e&&"object"==typeof e.adapter?e.adapter:window.Cordova||window.cordova?C("cordova"):C(),e){if(void 0!==e.useNonce&&(d=e.useNonce),void 0!==e.checkLoginIframe&&(u.enable=e.checkLoginIframe),e.checkLoginIframeInterval&&(u.interval=e.checkLoginIframeInterval),"login-required"===e.onLoad&&(a.loginRequired=!0),e.responseMode){if("query"!==e.responseMode&&"fragment"!==e.responseMode)throw"Invalid value for responseMode";a.responseMode=e.responseMode}if(e.flow){switch(e.flow){case"standard":a.responseType="code";break;case"implicit":a.responseType="id_token token";break;case"hybrid":a.responseType="code id_token token";break;default:throw"Invalid value for flow"}a.flow=e.flow}if(null!=e.timeSkew&&(a.timeSkew=e.timeSkew),e.redirectUri&&(a.redirectUri=e.redirectUri),e.silentCheckSsoRedirectUri&&(a.silentCheckSsoRedirectUri=e.silentCheckSsoRedirectUri),e.pkceMethod){if("S256"!==e.pkceMethod)throw"Invalid value for pkceMethod";a.pkceMethod=e.pkceMethod}"boolean"==typeof e.enableLogging?a.enableLogging=e.enableLogging:a.enableLogging=!1}a.responseMode||(a.responseMode="fragment"),a.responseType||(a.responseType="code",a.flow="standard");var t=R(),r=R();r.promise.then((function(){a.onReady&&a.onReady(a.authenticated),t.setSuccess(a.authenticated)})).catch((function(e){t.setError(e)}));var i=function(e){var t,r=R();function n(e){a.endpoints=e?{authorize:function(){return e.authorization_endpoint},token:function(){return e.token_endpoint},logout:function(){if(!e.end_session_endpoint)throw"Not supported by the OIDC server";return e.end_session_endpoint},checkSessionIframe:function(){if(!e.check_session_iframe)throw"Not supported by the OIDC server";return e.check_session_iframe},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode'},userinfo:function(){if(!e.userinfo_endpoint)throw"Not supported by the OIDC server";return e.userinfo_endpoint}}:{authorize:function(){return m()+"/protocol/openid-connect/auth"},token:function(){return m()+"/protocol/openid-connect/token"},logout:function(){return m()+"/protocol/openid-connect/logout"},checkSessionIframe:function(){var e=m()+"/protocol/openid-connect/login-status-iframe.html";return a.iframeVersion&&(e=e+"?version="+a.iframeVersion),e},register:function(){return m()+"/protocol/openid-connect/registrations"},userinfo:function(){return m()+"/protocol/openid-connect/userinfo"}}}if(o?"string"==typeof o&&(t=o):t="keycloak.json",t)(c=new XMLHttpRequest).open("GET",t,!0),c.setRequestHeader("Accept","application/json"),c.onreadystatechange=function(){if(4==c.readyState)if(200==c.status||S(c)){var e=JSON.parse(c.responseText);a.authServerUrl=e["auth-server-url"],a.realm=e.realm,a.clientId=e.resource,n(null),r.setSuccess()}else r.setError()},c.send();else{if(!o.clientId)throw"clientId missing";a.clientId=o.clientId;var i=o.oidcProvider;if(i){var s,c;"string"==typeof i?(s="/"==i.charAt(i.length-1)?i+".well-known/openid-configuration":i+"/.well-known/openid-configuration",(c=new XMLHttpRequest).open("GET",s,!0),c.setRequestHeader("Accept","application/json"),c.onreadystatechange=function(){4==c.readyState&&(200==c.status||S(c)?(n(JSON.parse(c.responseText)),r.setSuccess()):r.setError())},c.send()):(n(i),r.setSuccess())}else{if(!o.url)for(var u=document.getElementsByTagName("script"),h=0;h<u.length;h++)if(u[h].src.match(/.*keycloak\.js/)){o.url=u[h].src.substr(0,u[h].src.indexOf("/js/keycloak.js"));break}if(!o.realm)throw"realm missing";a.authServerUrl=o.url,a.realm=o.realm,n(null),r.setSuccess()}}return r.promise}();function c(){var t=function(e){e||(n.prompt="none"),a.login(n).then((function(){r.setSuccess()})).catch((function(){r.setError()}))},o=function(){var e=document.createElement("iframe"),t=a.createLoginUrl({prompt:"none",redirectUri:a.silentCheckSsoRedirectUri});e.setAttribute("src",t),e.setAttribute("title","keycloak-silent-check-sso"),e.style.display="none",document.body.appendChild(e);var o=function(t){t.origin===window.location.origin&&e.contentWindow===t.source&&(g(w(t.data),r),document.body.removeChild(e),window.removeEventListener("message",o))};window.addEventListener("message",o)},n={};switch(e.onLoad){case"check-sso":u.enable?y().then((function(){b().then((function(e){e?r.setSuccess():a.silentCheckSsoRedirectUri?o():t(!1)})).catch((function(){r.setError()}))})):a.silentCheckSsoRedirectUri?o():t(!1);break;case"login-required":t(!0);break;default:throw"Invalid value for onLoad"}}return i.then((function(){var t=w(window.location.href);if(t&&window.history.replaceState(window.history.state,null,t.newUrl),t&&t.valid)return y().then((function(){g(t,r)})).catch((function(e){r.setError()}));e?e.token&&e.refreshToken?(_(e.token,e.refreshToken,e.idToken),u.enable?y().then((function(){b().then((function(e){e?(a.onAuthSuccess&&a.onAuthSuccess(),r.setSuccess(),H()):r.setSuccess()})).catch((function(){r.setError()}))})):a.updateToken(-1).then((function(){a.onAuthSuccess&&a.onAuthSuccess(),r.setSuccess()})).catch((function(){a.onAuthError&&a.onAuthError(),e.onLoad?c():r.setError()}))):e.onLoad?c():r.setSuccess():r.setSuccess()})),i.catch((function(){t.setError()})),t.promise},a.login=function(e){return n.login(e)},a.createLoginUrl=function(r){var o,i,c=A(),u=A(),h=n.redirectUri(r),l={state:c,nonce:u,redirectUri:encodeURIComponent(h)};r&&r.prompt&&(l.prompt=r.prompt),o=r&&"register"==r.action?a.endpoints.register():a.endpoints.authorize(),i=r&&r.scope?-1!=r.scope.indexOf("openid")?r.scope:"openid "+r.scope:"openid";var f=o+"?client_id="+encodeURIComponent(a.clientId)+"&redirect_uri="+encodeURIComponent(h)+"&state="+encodeURIComponent(c)+"&response_mode="+encodeURIComponent(a.responseMode)+"&response_type="+encodeURIComponent(a.responseType)+"&scope="+encodeURIComponent(i);if(d&&(f=f+"&nonce="+encodeURIComponent(u)),r&&r.prompt&&(f+="&prompt="+encodeURIComponent(r.prompt)),r&&r.maxAge&&(f+="&max_age="+encodeURIComponent(r.maxAge)),r&&r.loginHint&&(f+="&login_hint="+encodeURIComponent(r.loginHint)),r&&r.idpHint&&(f+="&kc_idp_hint="+encodeURIComponent(r.idpHint)),r&&r.locale&&(f+="&ui_locales="+encodeURIComponent(r.locale)),a.pkceMethod){var p=k(96,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789");l.pkceCodeVerifier=p,f+="&code_challenge="+function(r,o){switch(r){case"S256":var n=new Uint8Array(e.arrayBuffer(o));return t.fromByteArray(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");default:throw"Invalid value for pkceMethod"}}(a.pkceMethod,p),f+="&code_challenge_method="+a.pkceMethod}return s.add(l),f},a.logout=function(e){return n.logout(e)},a.createLogoutUrl=function(e){return a.endpoints.logout()+"?redirect_uri="+encodeURIComponent(n.redirectUri(e,!1))},a.register=function(e){return n.register(e)},a.createRegisterUrl=function(e){return e||(e={}),e.action="register",a.createLoginUrl(e)},a.createAccountUrl=function(e){var t=m(),r=void 0;return void 0!==t&&(r=t+"/account?referrer="+encodeURIComponent(a.clientId)+"&referrer_uri="+encodeURIComponent(n.redirectUri(e))),r},a.accountManagement=function(){return n.accountManagement()},a.hasRealmRole=function(e){var t=a.realmAccess;return!!t&&t.roles.indexOf(e)>=0},a.hasResourceRole=function(e,t){if(!a.resourceAccess)return!1;var r=a.resourceAccess[t||a.clientId];return!!r&&r.roles.indexOf(e)>=0},a.loadUserProfile=function(){var e=m()+"/account",t=new XMLHttpRequest;t.open("GET",e,!0),t.setRequestHeader("Accept","application/json"),t.setRequestHeader("Authorization","bearer "+a.token);var r=R();return t.onreadystatechange=function(){4==t.readyState&&(200==t.status?(a.profile=JSON.parse(t.responseText),r.setSuccess(a.profile)):r.setError())},t.send(),r.promise},a.loadUserInfo=function(){var e=a.endpoints.userinfo(),t=new XMLHttpRequest;t.open("GET",e,!0),t.setRequestHeader("Accept","application/json"),t.setRequestHeader("Authorization","bearer "+a.token);var r=R();return t.onreadystatechange=function(){4==t.readyState&&(200==t.status?(a.userInfo=JSON.parse(t.responseText),r.setSuccess(a.userInfo)):r.setError())},t.send(),r.promise},a.isTokenExpired=function(e){if(!a.tokenParsed||!a.refreshToken&&"implicit"!=a.flow)throw"Not authenticated";if(null==a.timeSkew)return f("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var t=a.tokenParsed.exp-Math.ceil((new Date).getTime()/1e3)+a.timeSkew;if(e){if(isNaN(e))throw"Invalid minValidity";t-=e}return t<0},a.updateToken=function(e){var t=R();if(!a.refreshToken)return t.setError(),t.promise;e=e||5;var r=function(){var r=!1;if(-1==e?(r=!0,f("[KEYCLOAK] Refreshing token: forced refresh")):a.tokenParsed&&!a.isTokenExpired(e)||(r=!0,f("[KEYCLOAK] Refreshing token: token expired")),r){var o="grant_type=refresh_token&refresh_token="+a.refreshToken,n=a.endpoints.token();if(c.push(t),1==c.length){var i=new XMLHttpRequest;i.open("POST",n,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.withCredentials=!0,o+="&client_id="+encodeURIComponent(a.clientId);var s=(new Date).getTime();i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status){f("[KEYCLOAK] Token refreshed"),s=(s+(new Date).getTime())/2;var e=JSON.parse(i.responseText);_(e.access_token,e.refresh_token,e.id_token,s),a.onAuthRefreshSuccess&&a.onAuthRefreshSuccess();for(var t=c.pop();null!=t;t=c.pop())t.setSuccess(!0)}else for(p("[KEYCLOAK] Failed to refresh token"),400==i.status&&a.clearToken(),a.onAuthRefreshError&&a.onAuthRefreshError(),t=c.pop();null!=t;t=c.pop())t.setError(!0)},i.send(o)}}else t.setSuccess(!1)};return u.enable?b().then((function(){r()})).catch((function(){t.setError()})):r(),t.promise},a.clearToken=function(){a.token&&(_(null,null,null),a.onAuthLogout&&a.onAuthLogout(),a.loginRequired&&a.login())};var U=function(){if(!(this instanceof U))return new U;localStorage.setItem("kc-test","test"),localStorage.removeItem("kc-test");function e(){for(var e=(new Date).getTime(),t=0;t<localStorage.length;t++){var r=localStorage.key(t);if(r&&0==r.indexOf("kc-callback-")){var o=localStorage.getItem(r);if(o)try{var n=JSON.parse(o).expires;(!n||n<e)&&localStorage.removeItem(r)}catch(e){localStorage.removeItem(r)}}}}this.get=function(t){if(t){var r="kc-callback-"+t,o=localStorage.getItem(r);return o&&(localStorage.removeItem(r),o=JSON.parse(o)),e(),o}},this.add=function(t){e();var r="kc-callback-"+t.state;t.expires=(new Date).getTime()+36e5,localStorage.setItem(r,JSON.stringify(t))}},O=function(){if(!(this instanceof O))return new O;var e=this;e.get=function(e){if(e){var n=r("kc-callback-"+e);return o("kc-callback-"+e,"",t(-100)),n?JSON.parse(n):void 0}},e.add=function(e){o("kc-callback-"+e.state,JSON.stringify(e),t(60))},e.removeItem=function(e){o(e,"",t(-100))};var t=function(e){var t=new Date;return t.setTime(t.getTime()+60*e*1e3),t},r=function(e){for(var t=e+"=",r=document.cookie.split(";"),o=0;o<r.length;o++){for(var n=r[o];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return""},o=function(e,t,r){var o=e+"="+t+"; expires="+r.toUTCString()+"; ";document.cookie=o}};function T(e){return function(){a.enableLogging&&e.apply(console,Array.prototype.slice.call(arguments))}}}}(r(2023),r(9742))}}]);